"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var c=require("react"),p=e(c),y=e(require("timestamp-utils")),m=e(require("lodash.times"));function r(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(n),t=(e=r?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,l=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||e.length<t)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){e=e||(new Date).getTime();var t=(r=v(y.decompose(e),3))[0],n=r[1],e=j(y.addDays(e,1-r[2])),r=E[n-1]||(w(t)?29:28),r=y.addDays(e,r-1),a=y.getWeekDay(e);return{firstMonthDay:e,lastMonthDay:r,firstDayToDisplay:y.addDays(e,-a),month:n,year:t}}function D(e,t){return{startDate:t?e?Math.min(e,t):null:e,endDate:t&&t!==e?Math.max(e,t):null}}function O(e){return"0".concat(e).slice(-2)}var E=[31,null,31,30,31,30,31,31,30,31,30,31],C=864e5,w=function(e){return e%4==0&&e%100!=0||e%400==0},j=function(e){var t=v(y.decompose(e),7);return y.add(e,{hours:-t[3],minutes:-t[4],seconds:-t[5],milliseconds:-t[6]})},N=function(){u(a,c.Component);var r=f(a);function a(){var c;l(this,a);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s(h(c=r.call.apply(r,[this].concat(t))),"onHoursChange",function(e){var t=c.props;(0,t.onTimeChange)(y.setHours(t.date,parseInt(e.target.value,10)))}),s(h(c),"onMinutesChange",function(e){var t=c.props;(0,t.onTimeChange)(y.setMinutes(t.date,parseInt(e.target.value,10)))}),s(h(c),"render",function(){var e=c.props,t=e.date,n=e.displayTime,r=e.dayLabels,e=e.monthLabels,a=y.getHours(t),o=y.getMinutes(t);return p.createElement("div",{className:"rlc-date-details-wrapper"},p.createElement("div",{className:"rlc-date-details"},p.createElement("div",{className:"rlc-date-number"},y.getDay(t)),p.createElement("div",{className:"rlc-date-day-month-year"},p.createElement("div",{className:"rlc-detail-day"},r[y.getWeekDay(t)]),p.createElement("div",{className:"rlc-detail-month-year"},e[y.getMonth(t)-1]," ",p.createElement("span",{className:"rlc-detail-year"},y.getYear(t))))),n&&p.createElement("div",{className:"rlc-date-time-selects"},p.createElement("select",{onChange:c.onHoursChange,value:a},m(24).map(function(e){return p.createElement("option",{value:O(e),key:e},O(e))})),p.createElement("span",{className:"rlc-time-separator"},":"),p.createElement("select",{onChange:c.onMinutesChange,value:o},m(60).map(function(e){return p.createElement("option",{value:O(e),key:e},O(e))}))))}),c}return i(a)}(),M=function(){u(o,c.Component);var a=f(o);function o(){var t;l(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s(h(t=a.call.apply(a,[this].concat(n))),"prevYear",function(){return t.props.onChange({yearOffset:-1})}),s(h(t),"prevMonth",function(){return t.props.onChange({monthOffset:-1})}),s(h(t),"nextYear",function(){return t.props.onChange({yearOffset:1})}),s(h(t),"nextMonth",function(){return t.props.onChange({monthOffset:1})}),s(h(t),"render",function(){var e=t.props;return p.createElement("div",{className:"rlc-month-and-year-wrapper"},p.createElement("div",{className:"rlc-navigation-button-wrapper rlc-prevs"},p.createElement("div",{className:"rlc-navigation-button rlc-prev-year",onClick:t.prevYear},"<<"),p.createElement("div",{className:"rlc-navigation-button rlc-prev-month",onClick:t.prevMonth},"<")),p.createElement("div",{className:"rlc-month-and-year"},e.monthLabels[e.month-1]," ",p.createElement("span",null,e.year)),p.createElement("div",{className:"rlc-navigation-button-wrapper rlc-nexts"},p.createElement("div",{className:"rlc-navigation-button rlc-next-month",onClick:t.nextMonth},">"),p.createElement("div",{className:"rlc-navigation-button rlc-next-year",onClick:t.nextYear},">>")))}),t}return i(o)}(),t=function(){u(n,c.Component);var t=f(n);function n(e){var f;return l(this,n),s(h(f=t.call(this,e)),"componentDidUpdate",function(e){var t=f.props,n=t.timezone,r=t.startDate,t=t.endDate;n!==e.timezone&&y.setTimezone(n),r===e.startDate&&t===e.endDate||f.setState(f.getInitialState(f.props))}),s(h(f),"getInitialState",function(e){var t=e.startDate,n=e.endDate,e=e.range;return a(a({},g(t)),D(t,e?n:null))}),s(h(f),"onClickDay",function(e){var t=f.state,n=t.startDate,r=f.props.range;f.update(n&&r?n&&!t.endDate?D(n,e):{startDate:e,endDate:null}:{startDate:e})}),s(h(f),"changeMonth",function(e){var t=e.yearOffset,e=e.monthOffset,n=f.state.firstMonthDay,n=y.add(n,{months:void 0===e?0:e,years:void 0===t?0:t});f.setState(g(n))}),s(h(f),"update",function(e){var t=e.startDate,e=e.endDate,t=void 0===t?f.props.startDate:t,e=void 0===e?f.props.endDate:e;f.props.onChange(t,e)}),s(h(f),"getClassNames",function(e){var t,n=f.state,r=n.firstMonthDay,a=n.lastMonthDay,o=n.endDate,c=f.props,l=c.disableDates,c=c.markedDays,n=j(n.startDate),i=j(o),c="function"==typeof c?c(e):!!Array.isArray(c)&&c.map(j).includes(e),r=(s(a={"rlc-day-disabled":l(e),"rlc-day-today":e===j((new Date).getTime()),"rlc-day-inside-selection":(l=i,n<(t=e)&&t<l),"rlc-day-out-of-month":(t=a,(l=e)<r||t<l),"rlc-day-selected":!o&&n===e,"rlc-day-start-selection":o&&n===e,"rlc-day-end-selection":o&&i===e},"rlc-day-".concat(e),!0),s(a,"rlc-day-marked",c),a);return Object.entries(r).reduce(function(e,t){var t=v(t,2),n=t[0];return t[1]?"".concat(e," ").concat(n):e},"")}),s(h(f),"render",function(){var t,e=f.state,n=e.firstDayToDisplay,r=e.startDate,a=e.endDate,o=e.lastMonthDay,c=f.props,l=c.disableDates,i=c.displayTime,s=c.dayLabels,u=c.monthLabels,d=c.onClickDate;return p.createElement("div",{className:"rlc-calendar"},p.createElement("div",{className:"rlc-details"},!!r&&p.createElement(N,{dayLabels:s,monthLabels:u,date:r,displayTime:i,onTimeChange:function(e){return f.update({startDate:e})}}),!!a&&p.createElement(N,{dayLabels:s,monthLabels:u,date:a,displayTime:i,onTimeChange:function(e){return f.update({endDate:e})}})),p.createElement(M,{monthLabels:u,month:e.month,year:e.year,onChange:f.changeMonth}),p.createElement("div",{className:"rlc-days-label"},s.map(function(e){return p.createElement("div",{className:"rlc-day-label",key:e.toLowerCase()},e.slice(0,2))})),p.createElement("div",{className:"rlc-days"},(t=n,r=y.getWeekDay(c=o),m((c-t)/C+(6===r?0:6-r)+1,function(e){return y.addDays(t,e)}).map(function(e){return p.createElement("div",{className:"rlc-day ".concat(f.getClassNames(e)),key:e,onClick:function(){d(e),l(e)||f.onClickDay(e)}},parseInt(y.getDay(e),10))}))))}),y.setTimezone(e.timezone),f.state=f.getInitialState(e),f}return i(n)}();t.defaultProps={startDate:null,endDate:null,onChange:function(){},disableDates:function(){return!1},displayTime:!1,dayLabels:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],monthLabels:["January","February","March","April","May","June","July","August","September","October","November","December"],timezone:"UTC",markedDays:function(){return!1},onClickDate:function(){},range:!0},module.exports=t;
